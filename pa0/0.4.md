# Installing More Tools

What you should do in this section are:

1. Read the whole text carefully.
2. Try the commands of Linux mentioned.
3. Configure the network *if your VM cannot access to the Internet*.
4. Add apt sources to acquire a faster installation.
5. Install all tools mentioned.
6. Answer all the questions given in the quoting part.

---

## Configuring the Network

We executed an installation without network, which make it unable to acquire network address by operating system itself so we configure it manually. If your VM can connect to the Internet correctly, you can skip this and navigate to *Adding APT sources* in this section.

### Configuring VM settings

Before booting the VM, we configure the VM itself firstly.

1. Make sure your VM is not running, select the VM you created in the sidebar and click `Settings`.
2. Click `Network` in the sidebar.
3. Make sure `Enable Network Adapter` in `Adapter 1` is checked and configure `Attached to` as `Bridged Adapter`.
4. The `Name` field will be enabled and what you should do is select the network device (wireless or wired network adapter) you are using.
5. Click `OK` to save the settings.

{% panel style="info", title="关于桥接网络" %}

后面我们会介绍使用 SSH 工具连接虚拟机以便于操作，因此我们使用“桥接模式”的虚拟机网卡。在这个模式下，虚拟机网卡将通过一个虚拟网桥和选定的网卡连接在一起（你可以理解为是电脑里复制出来了一块和物理网卡相同的一块网卡，实则不然），这就意味着如果你现在使用的是有线网络，则需要在此处配置中选中有线网卡桥接。但当你更换为使用无线网卡上网时，进入虚拟机设置里面重新配置一下即可，反之亦然。

{% endpanel %}

If your `Bridged Adapter` doesn't work correctly, you can switch it to `NAT` and enable `Adapter 2` and set it to `Host-only Adapter`, we call it double-adapter mode but we don't provide detailed instruction, if you encountered with this problem, search the Internet.

### Configuring OS Settings

Now start your VM and login as normal user. Check the network with command below:

```bash
ping 114.114.114.114 -c 4
```

In most of circumstances, you will receive a message telling you that:

```bash
connect: Network is unreachable
```

and this means we should also configure the settings of Debian manually.

Execute command

```bash
ip addr
```

and you will see all network adapters in your VM. By default, the first interface is `lo` which represents the loopback network and what we should focus on is the second one:

```
2: enp0s3: <BROADCAST,MULTICAST> mtu 1500 qdisc noop state DOWN group default qlen 1000
	link/ether 08:00:27:a4:55:95 brd ff:ff:ff:ff:ff:ff
```

*If you have only the `lo` interface, that means you don't turn on the `Adapter 1` in the settings of VM properly.*

The message you can see might be different, but we just focus on the name of the interface. In this example, it is `enp0s3` and you can treat it as the name of the adapter, please remember the one you see and we will use it later.

Type commands below to modify the settings of interfaces, you don't need to type strings following `#` which mean comments but not parts of a command.

```bash
cd /etc/network/
sudo cp interfaces interfaces.bak # make a backup of the setting file
sudo vim interfaces
```

and then modify the opened file as below. We call this format below **diff format** and you can search the Internet to learn more about it.

```diff
--- interfaces.bak
+++ interfaces
@@ -6,3 +6,6 @@
 # The loopback network interface
 auto lo
 iface lo inet loopback
+
+auto enp0s3
+iface enp0s3 inet dhcp
```

but please replace `enp0s3` with your own name of interface which might be different. Save the file and execute

```bash
sudo service networking restart
```

and wait a minute. When this command is executed correctly, you can execute

```bash
ip addr
```

again and you will find that the interface `enp0s3` is allocated with an IP address which usually looks like `192.168.x.x` or something but if you can access to the Internet, it makes no difference.

Now we let's check if the network working normally by 

```bash
ping www.baidu.con -c 4
```

and if you see message below, it means your network is running correctly:

```
PING www.a.shifen.com (180.97.33.107) 56(84) bytes of data.
64 bytes from 180.97.33.107 (180.97.33.107): icmp_seq=1 ttl=55 time=37.1 ms
64 bytes from 180.97.33.107 (180.97.33.107): icmp_seq=2 ttl=55 time=37.7 ms
64 bytes from 180.97.33.107 (180.97.33.107): icmp_seq=3 ttl=55 time=37.7 ms
64 bytes from 180.97.33.107 (180.97.33.107): icmp_seq=4 ttl=55 time=37.5 ms

--- www.a.shifen.com ping statistics ---
4 packets transmitted, 4 received, 0% packet loss, time 17063ms
rtt min/avg/max/mdev = 37.183/37.557/37.762/0.302 ms
```

## Adding APT sources

Because of the network environment, we should replace the original ones with others in the mainland of China, so you should perform modification below:

```bash
cd /etc/apt/                         # change to the directory setting file exists
sudo cp sources.list soures.list.bak # make a backup of the setting file
sudo vim sources.list
```

What you should do is to comment out **each line existing now** with a `#` symbol at the start of this line like:

```
# deb cdrom:[Debian GNU/Linux 9.6.0 _Stretch_ - Official i386 NETINST 20181110-12:18]/ stretch main
```

and then append lines below at the end of the file, **please make sure you don't type any letter with the wrong one**:

```
deb http://mirrors.163.com/debian/ stretch main non-free contrib
deb https://mirrors.ustc.edu.cn/debian/ stretch main contrib non-free
deb http://mirrors.aliyun.com/debian/ stretch main non-free contrib
```

make sure you didn't type anything wrong and save it by `<Esc>:wq` to save and exit vim.

Now update the apt source by

```bash
sudo apt-get update
```

This command requires root permission, too. And it requires Internet accessing. It costs some time for this command to finish. If some errors are reported, please check

- whether there are any typos in `sources.list`, and
- whether your host is able to access the Internet.

## Installing tools for PAs

The following tools are necessary for PAs, and you don't need to type the comment part:

```bash
sudo apt-get install man                # online reference manuals
sudo apt-get install build-essential    # build-essential packages, include binary utilities, gcc, make, and so on
sudo apt-get install gcc-doc            # GCC document
sudo apt-get install gdb                # GNU debugger
sudo apt-get install git                # reversion control system
sudo apt-get install libreadline-dev    # a library to use compile the project later
sudo apt-get install libsdl2-dev        # a library to use compile the project later
sudo apt-get install qemu-system-x86    # QEMU
```

 but this will cost some time. Tools installed above will be discussed in the next section.

*That's everything in PA0.4.*