# Logging in and Transferring Files via SSH

{% panel style="info", title="What you should do in this section" %}

1. Read the whole text carefully.
2. Try the commands of Linux mentioned.
3. Download and install some necessary tools.
4. Try operations of logging and file transferring mentioned by yourself.
5. Answer all the questions given in the quoting part.

{% endpanel %}

Since there is one terminal with small size in the VM, it is not very convenient to use. Therefore, we recommend you to log in the VM via SSH.

## Bridged Network

We described how to connect the VM with Internet in the section of **[Configuring VM settings](0.4.md)**, using bridged adapter, this network mode is essential to use SSH for logging. If you failed to set up a VM using the bridged adapter mode, you can try to set it as NAT-Host-only double adapter mode to realize it.

## Host Configuration

Now keep the VM on and go back to the host. You should perform some configurations to access the VM via SSH. According to the type of your host operating system, you will perform different configuration.

Now get the IP address of the bridged adapter in your VM by

```bash
ip addr
```

and the one (may be `enp0s3` or something like this) other than `lo` is your bridged adapter, remember the IP address in the `inet` entry and we will connect to it from now on.

### For Linux users

You can do experiments directly under the environment of physically installed Linux, not need to use SSH to connect the virtual machine.

### For Mac users

You will use the build-in `ssh` tool, and do not need to install an extra one. Open a terminal, run

```bash
ssh username@ip_addr
```

where `username` is your VM user name, `ip_addr` is the IP address of the adapter of VM mentioned above. For example:

```bash
ssh jack@192.168.0.104
```

If you are prompted with

```
Are you sure you want to continue connecting (yes/no)?
```

enter "yes". Then enter your VM user password. If everything is fine, you will access the VM via SSH successfully. To exit SSH, just type

```bash
exit
```

in terminal.

### For Windows users

Windows has no build-in `ssh` tool, and you have to download one manually. Download the **latest release version** of `putty.exe` [here](http://www.chiark.greenend.org.uk/~sgtatham/putty/download.html). Run `putty.exe`, and you will see a dialog is invoked. In the input box labeled with `Host Name (or IP address)`, enter the IP address of eth1 mentioned above. Leave other settings default, then click `Open` button. Enter your VM user name and password. If everything is fine, you will access the VM via SSH successfully. To exit SSH, just type

```bash
exit
```

in terminal.

## Transferring Files between Hosts

Although VM is running on the host, they are isolated logically. This means the host can not directly access files in the VM, and vice versa. Therefore, a way is needed to transfer files from/to the VM. In most circumstances, you need to export the codes you wrote in the virtual machine or transfer some necessary files into the VM. This section will tell you how to do that.

### For Linux users

You can do experiments directly under the environment of physically installed Linux, not need to use SSH to transfer files to/from the virtual machine.

### For Mac users

Thanks to Unix Philosophy, you can use one command to achieve the transferring.

To transfer files from host to VM, issue the following command in the host:

```bash
tar cj file | ssh username@ip_addr 'tar xvjf -'
```

where `file` is the file to transfer in the host, `username` and `ip_addr` are the same as mentioned in the Logging in via SSH section. You will be asked to enter your VM user password. If everything is fine, the `file` will be transferred to the home directory of the VM.

To transfer files from VM to host, issue the following command in the host:

```bash
ssh username@ip_addr 'tar cj file' | tar xvjf -
```

where `file` is the file to transfer in the VM, `username` and `ip_addr` are the same as mentioned in the Host Configuration section above. You will be asked to enter your VM user password. If everything is fine, the `file` will be transferred to the home directory of the host.

#### For Windows users

You can either use the **latest release version** of `psftp.exe` [here](http://www.chiark.greenend.org.uk/~sgtatham/putty/download.html) which is just a command line program in Windows. Or we recommend you to use other tools like [FileZilla](https://filezilla-project.org/) to establish the SSH file transfer protocol.

##### PSFTP

Run `psftp.exe`, and connect to the VM by the following command:

```
open ip_addr
```

where `ip_addr` is the same as mentioned in the Host Configuration section. Then enter your VM user name as well as the password, as if logging in via `ssh`. We list some useful commands in `psftp.exe`:

```
cd     change your remote working directory
exit   finish your SFTP session
get    download a file from the server to your local machine
help   give help
lcd    change local working directory
lpwd   print local working directory
ls     list remote files
put    upload a file from your local machine to the server
pwd    print your remote working directory
```

Under our situation, "local machine" stands for the host, "server" and "remote" stand for the VM. For more details about the command, refer to `help COMMAND`.

##### FileZilla

1. Run `FileZilla Client`.
2. Type the IP address at the `Host` entry like: `sftp://ip_addr`, note that `sftp://` is needed.
3. Type your username and password in the following textboxes and click `Quickconnect`.
4. A box of `Unknown host key` will appear and you should check `Always trust this host, add this key to the cache` to prevent it from appearing again next time.
5. If everything goes correctly, the connection will be established and you can see all the files in the VM.
6. Enjoy transferring files between VM and host!

{% panel style="success", title="Have a try!" %}

1. New a text file with casual contents in the host.
2. Transfer the text file to the VM.
3. Modify the content of the text file in the VM.
4. Transfer the modified file back to the host.

Check whether the content of the modified file you get after the last step is expected. If it is the case, you are done!

{% endpanel %}

---

*That's everything in PA0.6.*